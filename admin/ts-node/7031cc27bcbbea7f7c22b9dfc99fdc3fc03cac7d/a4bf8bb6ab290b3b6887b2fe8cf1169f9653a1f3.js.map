{"version":3,"file":"/home/kluch/QProjects/irbispanel/admin/tools/utils/seed/watch.ts","sources":["/home/kluch/QProjects/irbispanel/admin/tools/utils/seed/watch.ts"],"names":[],"mappings":";AAAA,mDAAqD;AACrD,6BAA4B;AAC5B,0CAA4C;AAE5C,uCAAkC;AAClC,yDAAwD;AACxD,qCAA+C;AAE/C,IAAM,OAAO,GAAQ,eAAe,EAAE,CAAC;AAEvC;;;GAGG;AACH,eAAsB,QAAgB;IACpC,MAAM,CAAC;QACL,IAAI,KAAK,GAAU;YACjB,WAAI,CAAC,gBAAM,CAAC,OAAO,EAAC,IAAI,CAAC;SAC1B,CAAC,MAAM,CAAC,gBAAM,CAAC,UAAU,CAAC,GAAG,CAAC,UAAC,CAAC,IAAO,MAAM,CAAC,GAAG,GAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAE1D,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,UAAC,CAAM;YAC1B,qCAAiB,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;YAElC,WAAW,CAAC,QAAQ,EAAE;gBAC3B,qCAAiB,CAAC,KAAK,EAAE,CAAC;gBAC1B,wBAAgB,CAAC,CAAC,CAAC,CAAC;YACf,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;AACJ,CAAC;AAfD,sBAeC","sourcesContent":["import * as gulpLoadPlugins from 'gulp-load-plugins';\nimport { join } from 'path';\nimport * as runSequence from 'run-sequence';\n\nimport Config from '../../config';\nimport { changeFileManager } from './code_change_tools';\nimport { notifyLiveReload } from '../../utils';\n\nconst plugins = <any>gulpLoadPlugins();\n\n/**\n * Watches the task with the given taskname.\n * @param {string} taskname - The name of the task.\n */\nexport function watch(taskname: string) {\n  return function () {\n    let paths:string[]=[\n      join(Config.APP_SRC,'**')\n    ].concat(Config.TEMP_FILES.map((p) => { return '!'+p; }));\n\n    plugins.watch(paths, (e: any) => {\n      changeFileManager.addFile(e.path);\n\n      runSequence(taskname, () => {\n\tchangeFileManager.clear();\n\tnotifyLiveReload(e);\n      });\n    });\n  };\n}\n"]}